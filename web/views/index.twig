{% block content %}
<html>
<head>
<!-- INCLUDE SESSION.JS JAVASCRIPT LIBRARY -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://test-tyro.mtf.gateway.mastercard.com/form/version/55/merchant/TYRO_318/session.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<!-- APPLY CLICK-JACKING STYLING AND HIDE CONTENTS OF THE PAGE -->
<style id="antiClickjack">body{display:none !important;}</style>
<style> 

pre {
  white-space: pre-wrap;
}

.input-group-addon {
    background-color: transparent;
    border-left: 0;
}
.input-padding{
    padding-bottom: 5pt
}
.bottom-align-text {
    position: absolute;
    bottom: 0;
    right: 0;
  }

.no-border {
    border: 0;
    box-shadow: none; 
}
.cc-number.identified {
    background-repeat: no-repeat;
	background-position-y: 3px;
	background-position-x: 99%;
}

.cc-number.visa {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAABHNCSVQICAgIfAhkiAAABLhJREFUWIXtmGtMFGcUhp9vdhaWBceyuCjFCwouIBhQ0agYMYKphraoMbZVY9T+0NQ/pbZpE2uTpknTJk1JWnszsdVqrVbTRpNeTDCtqRULoiAW2S1euClQdhfXZYHdYac/djtgtMVWE6Dx/TVzvnO+ed9z+WYyAsDhcCQCJZqm5WuaZmEYQwjhEkKcAIptNluLqKqqSjSbzTVxcXExiqIYZVkeao7/CFVV8Xg8AafT6fX5fNNls9lcEhcXN8pisQxv5mHIsozFYjECMUCJFAwGCxRFGRHkB0JRFGMwGCyQgNjh3jZ3Q5hzrDTURO4XDwUMNR4KGGrc9fhR/6hFddUj0EIGYcAwJh3Zkqz7+Lr9HC+9CEBUVARLCzL59vgF/H6VmOhIlizOACAY1Cgrv0xVTRNt7TcxGCTiraNY/8x8os2R+n7XGju48FszfWoQRYkiPy/9vwuQrdMwRMfT6zhG17ldEPAhRcQQu+EUiFDRDn1dwVsl3wGweeMi5s1J5oXthwBYON/GksUZ3PL2sH7Lbmrrrt/xjFVFOboAd6ePFWs/wNftByDCKFN5cgcREYMf73/rIcxjMGVv4tV9PWzOKsPSXU2f+woGS0pYQDkARtnAuqfm4qhv02OTJ1sBeOf94zr5x/IzKVg0Db9f5Vx1A6OVKN1/38EynTyAP6BSU9vCrOxJgwoYdAamZmZQtHMCbcaZqB2XADhz9gpXGzoAKFyaRfyYUTjqW/tjkscCUHWhUbctL5zBk8uyWFU0izdfW6lnt6cnwIEjZwCYN7u/Rc8PiL0vAXm5NvqCgqd3JdJwtRmAg0fK9fWNa+YDYB9QgalT4gGYmdWfwee27eelHYdpvu6+bf8jRytxd/oAeKV4mV6Zc9UND0ZAmi2BsVaFXhVKjgbocHop/akWCGUszZYAoFdACEFyWMDLzy9j9YrZCCHQNI1j31fx+Or3OP3rZSA04HsO/AJAVuYE0mwJZE+fCMD56gdUAYC83FQAfqxo59P9pwiofQBsWrdA9/n9cqgCiQmP6MNpMhl5Y/tyDu/ZQk52EgDdPX5ef/sYAD+cuEhTiwuAuTlTqHPcYGy8AoCrs4trjc4HJGCBDQBN09j75WkAkpOsLMwN2d2dXXi7egGwpYwLEw3o8dMzxvPhu+sQQgDg84UGdvfnP+s+n+w5SdGanXz1TYVuu5c2uqfP0HlzUjDKBgJqH2o4+xvW5urrN1pv6te2lNAAb9r6GQAZ6Y9ilA2UV15F00LvlcV5aZw5e4WLl1oAiImOJDLSqO/hcnehaRrnqxtZ+cTM+xcQbY4gZ0YSZRWh3rXERrO8cIa+3treLyA1XAFHfSvert47sliwaBrbtxWy9cUvdNvej58lMz1Rv1+1/iNqapuprG7A6fJiMhlve+kNhKirq9NSU1MHFdHh9OJyewFQFDPjwr0K4LnVQ2tbJwATx8dhMhlpanHT0NSB19uLpmmMHh3FlKR4Pe6voTfIBpKTrLc9q7Xdg8fjQwjB5ElWJEkgSeIOTna7/d4FDEfY7faR/zH3UMBQ438hwK2q6lDz+NcIc3ZLkiSVejyeEafA4/EEJEkqlX0+XzFQAIy4X4tAsYCR/XP3T6N8y7XxxywcAAAAAElFTkSuQmCC);
}
.cc-number.mastercard {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAABHNCSVQICAgIfAhkiAAABOFJREFUWIXVmF1MU2cYx3/ncA4t/dRWPhRECU07DKhoYIuZJFomQXAsuzHZsi3Ri+GyZHGZyZxuu+BCb4xemDi3ZDeDRU0Mm86wRYmZeuEEHImT0VKCfPnBV7GlhdLS7uLoxoXA230J/+RcnPR53vf3vH3e532fIwF4vd5s4HgikXAnEgkbi1iSJI1JktQM7Hc6nYNSe3t7tsFguGO3200Wi0VVFOV5M86rWCxGIBCIjo6OToTD4SLFYDAct9vtZpvNtrjJn0hRFGw2mwqYgONyPB4vt1gsSwJ+tiwWixqPx8tlYPliT5tn6Qnzcvl5g/xT/e2lj42M4G9sJHj5MpHeXuLBIEp6OmmFhVh37sRSWYkkz1qf+AwM/AR9P4C/AyaHQDWDeQ1kvwJrX4O09KQ5pM7OzoTL5RJ2iEciPKirY+jECeKh0Jx2OqeTnGPHWFZdDb0X4eYBeOyZe2DFCIUfwObPIEUnxOLxeJILIPrwIb6aGsK3bgnZI0m4vngDEw1i9gDpJVDxPRhWLmjq8XgQ3gMzoRC+qipxeCDFomfoqwYeNQu7wHALNFVBdO5/d7aEAxg8eJDw7dvCHMaS9eS9NYn9JdBnQiIu7Aqjv8Ktj4VMhVIo0tPDb04nxGLCDKkZOlRj5M93XQbk7RF2B0mB3V6w5M1p4vF4xKrQ2JkzyHo9OoeDKY+H1NxcmJkh4vM9G35tLo53+p49WKoVbBtg/HeYGp570uUF0H0Gig/OyyYUQPDqVZbV1JBXX493xw4cFy4w3tiI//x5FJuNsbNnSSsoIK24GOJxrNXVdL//NtZdrzPZ3kZ8IoiavZoMdwrm2gYIdMO9Rgg/AFmnldYVm2CiX1vxmWnYehquv/vvBBAdGMDidjPd349t925iw8NMeb3onU5MZWWYt23DWl3Ng7o6dA4Hkiyz+lQDU11dZHz0KWP19azYu5eZ/lboqodfDoB+Bbj2wJoaWLMLVlfA/Z/BmK1N6r8LoYEF2YQ3cVphIaHWVsxuNxGfjxSTCWtVFXqXi6muLibv3sVYUoIuP5+hkycxl5dj2LCB6P376NetY/DwYe0wG2nTBszaqoGb14IpF7rPgmKAts+hv0kLQEBCAag5OaQVFRFuayPQ1IQuP58Uu53Y6Kj2e2YmweZmDKWlqKtWYdi4kemeHkKtrfjPnUNfUEC4pYVY549QegS2fgk5FTDRBymp2jPcoqVW0Yfwwl7ttDbmLMgmlEKW7dvpra1lqqODRCzG46YmJm7cwLRlC7HxcSRZRl25Em9ZGUpmJgATTV9jfNlNtKeL4aM+CHaiDt6B6/dAVmCoRcv7jtPau78DfN9C5hbtDBjv0IJZQP9ZGc19z4Fe/1eVUq2gzxJ2Fy6jQimky8sjfd++JGaHvlPdPLoMj65oT2wiKXdYVzsv/FMJb+LsI0cwbNokDpBIoOZvxroect8Ek0PcFXsxlB4VMhUOIMVoxHHpEobSUmGOke/aiPAiqcuEXbTLXOUlUI1C5kk1NGpWFq5r18g6dAjZOP8EOqeT/IsXyfnmJlRcAOsCN17FCBs/gVevC91EnyrpfuCpZjc00319zAQC/3tDk3Q/sNiUVD+wWCUD/lgS9X2x6AmzX5Zl+UogEFhyEQQCgagsy1eUcDi8HygHltynRWC/BEv74+4fAxroUkHf2nEAAAAASUVORK5CYII=);
}
.cc-number.amex {
    background-image: url(data:image/png;base64,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);
}
.cc-number.discover {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAABHNCSVQICAgIfAhkiAAABMNJREFUWIXVWF1oU2cYfnJ6WrTYbE2oBEpko9JQaosQsChjggqhiobdWC+qd2V/udCOXUmkdlUYvciuKsxhV3B0qx1tJrgJrZqua1eKmmKWpkbr2lg12BobNSfJ+c55djEX7FrFn2KTB76L877v937PA8/Hd3gNAHD9+vVSAB6S20makMUwGAwPDAZDP4BD5eXlMwa/319aWFh4zWw2rzEajfmyLK80xxdCCIF4PK7Ozc09TiQSVXJhYaHHbDYXmUym7Gb+FLIsw2Qy5QNYA8Aj6bq+w2g05gT5Z2E0GvN1Xd8hASjOdtsshaeci6WVJvKmyHkBi7xz9OhRRCIRrFq1Cna7Hfv374csy3C73XC5XFAUBS0tLYhGo6ivr0ddXR1mZ2fR2tqKYDCIyspKHD58GEVFRdBu/QF1+FsgEYNU9iHyP3Dh+9OdMJlMcDqdAIBTp05h3bp1GBgYwJ07dwAAJSUlOH78OBoaGgAAxcXFOHDgAKqqqhYrCIVCfBbV1dU8efIke3t76XQ6uWfPHpKkzWbjxMQEHQ4HW1tbOTw8zNHRUSqKQpvNxubmZgYCAXo8HobDYYrpUT5pfp9Pmt/LrOSZz3j27Flu3LiRJJlOp2mxWDg9Pc2Kigq2t7ezv7+fQ0NDFEJQkiSOjIywvb2dFouF/0coFOKSt3fTpk2orq7Grl27YLFYEIlEMrnS0lJ4vV6sX78eu3fvRl9fH8xmM9xuNwCgsrISAJD65UsAXNBXGz+H2sYWfP7gAcbGxnDjxg1s3rwZVqsVADA5OYlEIgGr1QqDwQAAiEQimJ6eRklJyctZaEFSllFQUABVVTOxEydOoKurC8eOHYPX64XT6cTq1asXb5byluwp5eWhoaEBHR0dmJiYQGNjYyaXTCahKApSqRQAgCR8Ph86OzsRCoWWJrmUhS5evMhgMEiXy8WtW7cusJDP52MsFmNPTw/tdjvn5uZosVjY3d1NIQS7u7sZCAQoZvx88lXZQgv1HCJJ3r17l2vXruWGDRsy51ZUVHBwcJDRaJTRaJRCCObl5ZEkHQ4H29ralrTQIgH19fWsqanhtm3b2NTUxPn5eZLk3r17OTU1xSNHjrC8vJx2u52XLl0iSfr9fu7cuZNlZWWsra1lOBwmSYrIFSbPfEqlo47pwTbqIpU55+DBg+zo6Mh879u3jzU1NZmlqiq3bNlCkgwEAnQ4HFQUJVOvhs4vLSAXIG4NMdG2naFQiDn3DujRcaTOfALoGoAce8j0e0EkT9cDyXgmljM/Qdrfw0h1fQykHi2I54QA9fIPUH9rAnSxKJfVAph6jPSvbmjXep9bk7UCtKkRpL1fgPMzL6zLOgFMxJC+8DW0qz+9VH3WCKCWhrjSCdX3DaA8fOl9Ky6AugYt4IXq84APb7/y/hUTQFWB8HdB/PndaxH/D29dgD57E+LqjxBj3a9klefhrQig8hBa6DzE2M/QI6PL01T6l7oMICaEWPbJBB/fhxa+ABE8B/3WHwC1Ze2Pd60AEJMlSeqLx+Mfvelgi2oS+u3L0G4OQJv8HYyOLw/R5yBlcwpJkvpee7RITYV+7y/ot69An7kKPToOaIuf+mWFXAC8Y0XK5hT3iyoeAagyALk93P0HjHXGXp92US0AAAAASUVORK5CYII=);
}
</style>
</head>
<body>

<!-- CREATE THE HTML FOR THE PAYMENT PAGE -->


<div class="container-fluid py-3">
    <div class="row">
        <div class="col-12 col-sm-8 col-md-6 col-lg-4 mx-auto">
            <div id="pay-invoice" class="card">
                <div class="card-body">
                    <div class="card-title">
                        <h3 class="text-center">Hosted Session</h3>
                    </div>
                    <hr>
                        
                        

                        <div class="form-group">
                            <label for="cc-number" class="control-label mb-1">Card number</label>
                         
                            <input  type="tel" pattern="[0-9\s]{13,19}" id="card-number" class="input-field cc-number form-control invalidFieldCharacters" title="card number" aria-label="enter your card number" value="" tabindex="1" readonly>
                            <div id="card-invalid" class="invisible" role="alert">
                                    Please enter a valid card
                            </div>
                        </div>
                        <div class="form-group has-success">
                            <label for="cc-name" class="control-label mb-1">Name on card</label>
                            <input type="text" id="cardholder-name" class="input-field form-control cc-name" title="cardholder name" aria-label="enter name on card"  tabindex="3" readonly>

                        </div>

                        <div>Expiry Month 
                                <select id="expiry-month" class="form-control input-md" required="" readonly disabled>
                                    <option value="">Select Month</option>
                                    <option value="01">January</option>
                                    <option value="02">February</option>
                                    <option value="03">March</option>
                                    <option value="04">April</option>
                                    <option value="05">May</option>
                                    <option value="06">June</option>
                                    <option value="07">July</option>
                                    <option value="08">August</option>
                                    <option value="09">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                                </div>

                        <div class="input-group">
                            <div class="input-group-prepend">
                                    
                                        
                            </div>

                          </div>
                          <div>Expiry Year 
                                <select id="expiry-year" class="form-control input-md" required="" readonly disabled>
                                    <option value="">Select Year</option>
                                    <option>20</option>
                                    <option>21</option>
                                    <option>22</option>
                                    <option>23</option>
                                    <option>24</option>
                                    <option>25</option>
                                    <option>26</option>
                                    <option>27</option>
                                    <option>28</option>
                                    <option>29</option>
                                    <option>30</option>
                                </select>
                                </div>
                        <div class="row">
                            
                            <div class="col-6">
                                <label class="control-label mb-1">Security code</label>
                                <div class="input-group">
                                    <input type="text" id="security-code" class="input-field form-control cc-cvc" title="security code" aria-label="three digit CCV security code" value="" tabindex="4" readonly>
                                    <div id="card-invalid" class="invisible" role="alert">
                                            Please enter a valid CCV
                                    </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <button id="payment-button" onclick="updateSession()" class="btn btn-lg btn-info btn-block">
                                <i class="fa fa-lock fa-lg"></i>&nbsp;
                                <span id="payment-button-amount">Update Session</span>
                            </button>
                        </div>
                </div>
            </div>
        </div>
    </div>
    <div> Session response: </div>
<code>
<pre id="response" width="100%" height="100%"></pre>
</code>
<!-- JAVASCRIPT FRAME-BREAKER CODE TO PROVIDE PROTECTION AGAINST IFRAME CLICK-JACKING -->
<script type="text/javascript">
if (self.location.hostname === top.location.hostname) {
    var antiClickjack = document.getElementById("antiClickjack");
    antiClickjack.parentNode.removeChild(antiClickjack);
} else {
    top.location = self.location;
}
var sessions = [];


  PaymentSession.configure({
 
    fields: {
          // ATTACH HOSTED FIELDS TO YOUR PAYMENT PAGE FOR A CREDIT CARD
          card: {
            number: "#card-number"

          }
        },
        frameEmbeddingMitigation: ["javascript"],
        callbacks: {
 		initialized: function(response) {
         // HANDLE INITIALIZATION RESPONSE
         console.log("configuration ran");
 },
 formSessionUpdate: function(response) {
         console.log("card-number update: " + JSON.stringify(response));
	// HANDLE RESPONSE FOR UPDATE SESSION
 	if (response.status) {
   	if ("ok" == response.status) {
        console.log("Session updated with data: " + response.session.id);
        var sessionId = response.session.id;

         if (response.sourceOfFunds.provided.card.number) {
         console.log("valid card was provided.");
         document.getElementById("card-invalid").setAttribute("class", "invisible");
         configureDateAndCvv(sessionId);
         }
         if (response.sourceOfFunds.provided.card.number) {
         console.log("valid card was provided.");
         
         
        }
		//check if the user entered a Mastercard credit card
		if (response.sourceOfFunds.provided.card.scheme == 'MASTERCARD') {
        console.log("The user entered a Mastercard credit card.")
        document.getElementById("card-number").setAttribute("class", "form-control cc-number identified mastercard border-success");
       }
       if (response.sourceOfFunds.provided.card.scheme == 'VISA') {
        console.log("The user entered a Mastercard credit card.")
        document.getElementById("card-number").setAttribute("class", "form-control cc-number identified visa border-success");
       }
       if (response.sourceOfFunds.provided.card.scheme == 'AMEX') {
        console.log("The user entered a Mastercard credit card.")
        document.getElementById("card-number").setAttribute("class", "form-control cc-number identified amex border-success");
       }
        } else if ("fields_in_error" == response.status)  {
                 console.log("Session update failed with field errors.");
                 if (response.errors.cardNumber) {
                 console.log("Card number invalid or missing.");
                 document.getElementById("card-invalid").setAttribute("class", "alert alert-danger visible");
                 document.getElementById("card-number").setAttribute("class", "form-control cc-number");
                  }
    } 
    }
}
},
interaction: {
        displayControl: {
            formatCard: "EMBOSSED",
            invalidFieldCharacters: "REJECT"
			 }
 		}
  },"card-number");

  function configureDateAndCvv(sessionId){
    document.getElementById("expiry-month").removeAttribute("disabled");
    document.getElementById("expiry-year").removeAttribute("disabled");
    PaymentSession.configure({
        session: sessionId,
        fields: {
          // ATTACH HOSTED FIELDS TO YOUR PAYMENT PAGE FOR A CREDIT CARD
          
          card: {
    securityCode: "#security-code",
      expiryMonth: "#expiry-month",
      expiryYear: "#expiry-year",
      nameOnCard: "#cardholder-name"
          }
        },
        frameEmbeddingMitigation: ["javascript"],
        callbacks: {
 		initialized: function(response) {
         // HANDLE INITIALIZATION RESPONSE
         console.log("cvv and date configuration ran");
 },
 formSessionUpdate: function(response){
     var response = response;
     dateAndCvvResponse(response); 
    }
},
interaction: {
        displayControl: {
            formatCard: "EMBOSSED",
            invalidFieldCharacters: "REJECT"
			 }
 		}
  }, "cvv-date");
  }

  function dateAndCvvResponse(response) {
         console.log("cvv response: " + JSON.stringify(response));
         document.getElementById("response").innerText = JSON.stringify(response);
	// HANDLE RESPONSE FOR UPDATE SESSION
 	if (response.status) {
   	if ("ok" == response.status) {
        console.log("Session updated with data: " + response.session.id);
        var sessionId = response.session.id;
        

         
        }
    }
}


PaymentSession.onBlur(['card.number'], function() {
     console.log("card.number field changed");

    PaymentSession.updateSessionFromForm("card", undefined,'card-number');
    //handle change event
});

function updateSession() {
// UPDATE THE SESSION WITH THE INPUT FROM HOSTED FIELDS
//PaymentSession.updateSessionFromForm('card', undefined,"card-number");
PaymentSession.updateSessionFromForm('card', undefined,"cvv-date");
}

</script>
</body>
</html>

{% endblock %}
